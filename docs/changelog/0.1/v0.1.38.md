# Version 0.1.38

**Release Date:** 2026-01-03
**Status:** BUG-018 Fixed, LlamaEmbedder Enabled

---

## Summary

Major milestone: Fixed BUG-018 (CLI search hang) by replacing CGO dependencies with pure Go alternatives, and enabled neural embeddings with LlamaEmbedder using gollama.cpp.

---

## Fixed

### BUG-018: CLI Search Hang

The CLI binary installed to `~/.local/bin/` would hang indefinitely when running search commands due to CGO library loading issues (dyld path problems).

**Root Cause:** USearch and Hugot required CGO with specific library paths that weren't available when running the binary from outside the build directory.

**Solution:**
- Replaced USearch (CGO) with coder/hnsw (pure Go HNSW implementation)
- Replaced Hugot (CGO) with gollama.cpp (purego bindings to llama.cpp)

**Result:** Binary now runs from any location without library path issues.

---

## Added

### LlamaEmbedder: Neural Embeddings

Neural embedding support using gollama.cpp with the nomic-embed-text-v1.5 model.

**Features:**
- Uses nomic-embed-text-v1.5 GGUF model (768 dimensions)
- Metal GPU acceleration on macOS (Apple Silicon)
- Auto-downloads model (~138MB) on first use
- Graceful fallback to StaticEmbedder768 when unavailable

**Configuration:**
- Provider: `llama` (now valid in config)
- Model: Auto-managed in `~/.amanmcp/models/`

### Daemon Infrastructure

Background search service for faster CLI interactions.

**Features:**
- Unix socket IPC for fast CLI-to-daemon communication
- PID file management with stale detection
- JSON-RPC 2.0 protocol for search requests
- Multi-project support with LRU eviction
- ADR-022: CGO-Minimal Standalone Architecture

---

## Technical Details

### Dependencies Changed

| Old (CGO) | New (Pure Go) |
|-----------|---------------|
| USearch | coder/hnsw |
| Hugot | gollama.cpp v0.2.2 |

### Files Modified

- `internal/store/hnsw.go` - New pure Go vector store
- `internal/embed/llama.go` - gollama.cpp embedder
- `internal/daemon/*` - Background service infrastructure

### Quality Metrics

| Metric | Value |
|--------|-------|
| Tests | All passing |
| Race Detector | Clean |
| CGO Required | Only tree-sitter (chunking) |

---

## What's Next

- Dogfooding Phase 2: Real-world usage testing
- Performance benchmarking with neural embeddings
- Index re-generation for semantic search quality

---

*BUG-018 resolved, LlamaEmbedder operational*
