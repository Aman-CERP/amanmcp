# v0.1.66 - Unified Logging & MLX Auto-Detection

**Release Date:** 2026-01-09

## Highlights

- **Unified Log Viewing**: New `--source` flag for `amanmcp-logs` to view Go and MLX logs together
- **MLX Auto-Detection**: Config now defaults to auto-detect, preferring MLX on Apple Silicon
- **Debug by Default**: Log level defaults to debug for better troubleshooting

---

## Added

- Multi-source log viewing with `--source` flag for `amanmcp-logs` (go, mlx, all)
- MLX Python server JSON file logging with rotation (10MB, 5 files)
- Source labels in unified log view ([go] cyan, [mlx] magenta)
- Helpful error messages when log files don't exist (shows how to generate logs)
- MLX settings in config template (`mlx_endpoint`, `mlx_model`)

## Changed

- Default embeddings provider from `ollama` to `""` (auto-detect: MLX → Ollama → Static)
- Default log level from `info` to `debug` for better troubleshooting
- Config template now includes MLX server settings and auto-detection documentation

## Fixed

- Config init creating `provider: ollama` which bypassed MLX auto-detection
- Config file accumulating duplicate exclude patterns on upgrade

## Documentation

- Updated README with MLX Server section and debugging commands
- Updated mlx-server/README.md with Logging section
- Updated first-time-user-guide with log viewer documentation

---

## Migration Notes

### Existing Users

If you have an existing config with `provider: ollama`, update to enable auto-detection:

```yaml
# ~/.config/amanmcp/config.yaml
embeddings:
  provider: ""  # Empty = auto-detect (MLX -> Ollama -> Static)
```

Or regenerate config:
```bash
amanmcp config init --force
```

### Log Viewing

New unified log viewing:
```bash
amanmcp-logs --source all -f    # View Go + MLX logs together
amanmcp-logs --source mlx       # View MLX server logs only
```
