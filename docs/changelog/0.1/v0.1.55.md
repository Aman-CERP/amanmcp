# v0.1.55 - Search Quality & Daemon Improvements

**Release Date:** 2026-01-07

This release focuses on search quality improvements addressing vocabulary mismatch issues discovered during dogfood baseline testing, plus completing the daemon search implementation for fast CLI access.

---

## Added

- Add `--force` flag to `amanmcp index` command to clear existing index and rebuild from scratch
- Add search quality comparison benchmark (`./scripts/search-quality-compare.sh`)
  - Compares amanmcp vs ripgrep (Claude Code Grep proxy) and fd/find (Glob proxy)
  - 28 test queries covering semantic, symbol, regex, and glob patterns
  - Outputs JSON results and markdown report
- **QI-1 Lite: Query Expansion** - Research-backed code synonym expansion for BM25 search
  - Addresses vocabulary mismatch (RCA-010) where user terms don't match code terms
  - 80+ synonym mappings covering: function/method/class terms, error handling, HTTP/API,
    database, concurrency, testing, and natural language to code mappings
  - Based on CodeSearchNet vocabulary gap research and cross-language syntax analysis
  - BM25 receives expanded query, vector search uses original (embedding handles semantics)

## Fixed

- Ctrl+C during indexing now exits CLI within 500ms instead of waiting for HTTP timeout (60-120s)
- **Parent symbol registration** - Split methods (e.g., `Search_part1`, `Search_part2`) now
  register parent symbol (`Search`) on first chunk for discoverability (RCA-013 fix)
- **BUG-049 closed** - Scope filter works correctly; original issue was vocabulary mismatch
  causing no results before filtering
- **BUG-048: CLI search via daemon** - Daemon mode now executes actual searches instead of
  returning empty results. Enables fast CLI search (~50-200ms via socket vs 30+ second
  embedder initialization per query). Features:
  - Shared embedder loaded once at daemon startup
  - Per-project store loading with LRU eviction (max 5 projects)
  - QI-1 Lite query expansion integrated
  - Proper resource cleanup on shutdown

## Documentation

- Add BUG-049: Scope filter returns empty results (closed - not a bug)
- Add RCA-013: Search quality investigation - dogfood baseline at 60% (target 100%)
- Add SEARCH-QUALITY-ISSUES.md: Comprehensive investigation of search quality problems

---

## Upgrade Notes

After upgrading, re-index your codebase to benefit from parent symbol registration:

```bash
amanmcp index --force
```

To use fast CLI search via daemon:

```bash
amanmcp daemon start
amanmcp search "your query"
```
