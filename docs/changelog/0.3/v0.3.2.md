# v0.3.2 - Query Telemetry + Backlog Prioritization

**Release Date:** 2026-01-13
**Version:** 0.3.2
**Type:** Patch

---

## Summary

Adds query repetition telemetry for data-driven decisions, closes FEAT-AI5 after analysis, and reprioritizes search quality items.

---

## Added

- Add query repetition telemetry (SPIKE-004): Track exact query repeats and semantic similarity
  - Exact repeat detection via query hash (case-insensitive, whitespace-normalized)
  - Semantic similarity sampling via cosine similarity on last 10 query embeddings
  - New snapshot fields: ExactRepeatCount, ExactRepeatRate, SimilarQueryCount, SimilarQueryRate, UniqueQueryCount
  - Configurable via RecentQueriesCapacity, RecentEmbeddingsCapacity, SimilarityThreshold

---

## Changed

- Close FEAT-AI5 (Batched Incremental Updates) as won't implement
  - Core batching already exists at embedding level (EmbedBatch, 32 chunks/batch)
  - File-level batching would add 500ms latency for single-file edits
  - Event debouncing (200ms) already handles rapid changes efficiently

---

## Documentation

- Reprioritize search quality items after FEAT-AI5 analysis
  - FEAT-QI3 (Multi-Query Fusion): P2→P1 - best path to 90%+ Tier 1
  - SPIKE-TH1 (SPLADE Research): P3→P2 - fallback if QI3 insufficient
  - FEAT-RR2 (ColBERT Reranking): P3→P4 - Gate 1 failed, speed not needed

---

## Learnings Captured

- Verify claimed inefficiencies with code analysis before building optimization features
- The dominant cost determines where optimization matters (embedding is 10-100x more expensive than I/O)

---

## Sprint Status

- Sprint 5: 4/5 done (80%), FEAT-QI3 added as next priority
- Quality target: 90% minimum Tier 1 (currently 83%)

---

## Links

- [Unreleased Changes](../unreleased.md)
- [Previous Version (v0.3.1)](./v0.3.1.md)
