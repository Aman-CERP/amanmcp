# v0.1.58 - Content-Addressable Chunk IDs

Release date: 2026-01-07

## Highlights

- **BUG-052 fix** - Chunk IDs now content-addressable, enabling reliable resume after file modifications

---

## Fixed

- **BUG-052:** Fix "missing embedding for chunk" error when resuming after file modifications
  - Change chunk ID generation from position-based (`filePath + startLine`) to content-addressable (`filePath + contentHash`)
  - Same content in same file now produces same chunk ID regardless of line number shifts
  - Add version tracking to detect legacy indexes and guide migration
  - Add graceful regeneration for missing embeddings instead of crashing
  - Existing indexes require `--force` to rebuild with new content-addressable IDs

## Migration

Existing indexes using legacy position-based IDs will show:
```
Warning: Index uses legacy position-based chunk IDs (version 1).
Use --force to rebuild with content-addressable IDs.
```

Run `amanmcp index --force` to rebuild with new content-addressable IDs.
